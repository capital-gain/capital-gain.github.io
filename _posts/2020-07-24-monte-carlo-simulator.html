---
layout: post
status: publish
published: true
title: 'Монте-Карло симулятор: стресс-тест для ваших портфелей'
author:
  display_name: Дмитрий Никитенко
  login: Dmitry
  email: dima.nikitenko@gmail.com
  url: https://capital-gain.ru
author_login: Dmitry
author_email: dima.nikitenko@gmail.com
author_url: https://capital-gain.ru
excerpt: Несколько интересно проведенных вечеров, и вот результат - новый инструмент
  для более продвинутого финансового планирования, который способен показать вам не
  один сценарий развития событий, как это обычно делается в классических личных финансовых
  планах, а тысячи! На основе его результатов можно сделать выводы о реалистичности
  вашего финплана.
wordpress_id: 2403
wordpress_url: https://capital-gain.ru/?p=2403
date: '2020-07-24 20:49:50 +0600'
date_gmt: '2020-07-24 17:49:50 +0600'
categories:
- Мета
tags:
- Пенсия
- Финансовая независимость
- Инструменты
- Инвестирование
- Личные финансы
comments:
- id: 420
  author: Михаил
  author_email: mail@veisa.me
  author_url: http://veisa.me
  date: '2020-07-25 11:00:12 +0600'
  date_gmt: '2020-07-25 08:00:12 +0600'
  content: Спасибо вам большое, за ваш труд!
- id: 421
  author: Андрей
  author_email: sh-ae@ya.ru
  author_url: ''
  date: '2020-07-25 11:54:07 +0600'
  date_gmt: '2020-07-25 08:54:07 +0600'
  content: "Очень интересно. Будет чем занят несколько дней. \r\nОгромная благодарность
    за работу!"
- id: 424
  author: Александр
  author_email: Amigos8572@mail.ru
  author_url: ''
  date: '2020-07-25 20:00:54 +0600'
  date_gmt: '2020-07-25 17:00:54 +0600'
  content: Спасибо, интересная математика!
- id: 426
  author: Алексей
  author_email: ZolotovUSSR@yandex.ru
  author_url: ''
  date: '2020-07-25 21:36:03 +0600'
  date_gmt: '2020-07-25 18:36:03 +0600'
  content: "Очень хорошо дополняет возможности созданного ранее \"Финансового плана\"
    - возвращает с небес на землю, напоминая, что спланированные результаты могут
    реализоваться к нужному времени далеко не всегда.\r\nБольшая благодарность автору!"
- id: 428
  author: Виталий
  author_email: vit123@list.ru
  author_url: ''
  date: '2020-07-26 07:50:47 +0600'
  date_gmt: '2020-07-26 04:50:47 +0600'
  content: "Дмитрий, большое спасибо!\r\n\r\nПодскажите, пожалуйста, вы используете
    какой-то веб-фреймворк для создания подобных инструментов и вывода графической
    информации?"
- id: 429
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2020-07-26 07:59:48 +0600'
  date_gmt: '2020-07-26 04:59:48 +0600'
  content: Это клиентские SPA на React, для графиков используется Highcharts. Серверная
    часть есть только у инструмента анализа портфелей (написана на Golang).
- id: 689
  author: Дмитрий
  author_email: dmitr7mm@gmail.com
  author_url: ''
  date: '2020-10-11 18:46:52 +0600'
  date_gmt: '2020-10-11 15:46:52 +0600'
  content: "Подскажите по модели возврата к среднему, какую использовали - на основе
    отрицательной автокорреляции, или на основе модели Орштейна-Уленбека?\r\nКак вычислили
    конкретные показатели возврата к среднему для американского и мирового рынка?
    На основе показателя Хёрста? (т.е. грубо говоря что СКО за период T вырастает
    не до T^0,5,  а с некоторым понижающим коэфф. a^ln(t)*T^0,5\r\nУкажите, плз, параметры
    - сейчас аналогичную модель делаю."
- id: 693
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2020-10-12 06:14:45 +0600'
  date_gmt: '2020-10-12 03:14:45 +0600'
  content: Прежде всего моделирование делалось на годовых данных, которых в этом случае
    достаточно - это его сильно облегчило. В части возврата к среднему там просто
    добавляется множитель на основе предыдущих элементов сгенерированного ряда, который
    немного "пружинит" его к среднему, так что можно сказать на основе отрицательной
    автокорреляции. Показатель Хёрста не считался, вместо этого сверялось распределение
    исторических и сгенерированных доходностей по процентилям.
- id: 694
  author: Дмитрий
  author_email: dmitr7mm@gmail.com
  author_url: ''
  date: '2020-10-12 10:06:48 +0600'
  date_gmt: '2020-10-12 07:06:48 +0600'
  content: "множитель на основе предыдущих элементов сгенерированного ряда - на сколько
    глубоко смотрит в историю (день, месяц, год)? Или берет все элементы с долей,
    убывающей например  обратно пропорционально времени T или T^0,5 или ln(T)?\r\nЕсли
    в целом, то сколько это сжатие составило на годовых СКО? Т.е. например до этого
    множителя СКО был 20%, а стал 17% - т.е. какой коэфф. сжатия примерно?"
- id: 699
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2020-10-13 05:52:54 +0600'
  date_gmt: '2020-10-13 02:52:54 +0600'
  content: Берет все элементы и использует количество прошедших лет. СКО всегда примерно
    равно введённому ожидаемому, а возврат к среднему действует на цену. Если нужны
    подробности, напишите в телеграме (в био канала есть мой юзернейм).
- id: 706
  author: Aleks
  author_email: aamurygin@yandex.ru
  author_url: ''
  date: '2020-10-15 10:53:24 +0600'
  date_gmt: '2020-10-15 07:53:24 +0600'
  content: "Дмитрий, я не понимать, поясните плиз:\r\nВы рассматриваете такой пример
    при симулировании \"раннего пенсионера\": \"Я ввел такие же данные, как в самый
    первый раз, но заменил 30 лет на 60 и указал целевой капитал, равный начальному,
    потому что смотреть как таят деньги на счете, осознавая, что до конца пенсии ещё
    лет 30, сможет не каждый. Вместо 99% мы получили 83%\"\r\nПолучается, когда мы
    ставим 60 лет, капитал не проедается до уровня \"0\" в 83% случаев, изначально
    было 99% (при 30 годах). Вывод: при увеличении срока , вероятность сохранения
    капитала снижается с 99 до 83%.\r\nНо!!! если я ставлю минимальный целевой капитал
    на конец периода не \"0\", а \"21.000.000\", то при симуляции на 30 лет: конечный
    капитал превысил целевой в 73,6%. Затем 30 лет ---> 60 лет, симуляция: конечный
    капитал превысил целевой в 82,3%. Вывод : при увеличении срока, вероятность сохранения
    капитала УВЕЛИЧИВАЕТСЯ с 73,6 до 82,3%. \r\nЗдесь нет противоречия?"
- id: 707
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2020-10-15 11:30:02 +0600'
  date_gmt: '2020-10-15 08:30:02 +0600'
  content: "> Получается, когда мы ставим 60 лет, капитал не проедается до уровня
    &laquo;0&raquo; в 83% случаев\r\n\r\nВ 83% случаев капитал не проедается не до
    уровня 0, а до уровня начальной суммы.\r\n\r\nПо второй части противоречия я не
    вижу, это просто значит, что капитал до нуля все-таки не опускается и стратегия
    достаточно устойчива, потому что чем больше времени проходит, тем большее количество
    разных исходов, первоначально опустившись ниже целевой суммы, успевают вернуться
    к ней. То есть при таких настройках чем больше вы поставите лет, тем выше будет
    процент достижения цели. Другими словами большинство изначально неудачных исходов
    восстанавливаются, не успев опуститься до нуля, то есть капитал после просадки
    отрастает. Можете воспринимать это как \"включение в работу\" сложного процента
    со временем."
- id: 948
  author: Дмитрий
  author_email: e1e8@list.ru
  author_url: ''
  date: '2020-12-01 22:16:27 +0600'
  date_gmt: '2020-12-01 19:16:27 +0600'
  content: Блин, я так долго строил в Экселе симуляции портфелей и пытался сделать
    анализ финансового плана, но здесь это просто табличка из моей мечты) Я часа 4
    сидел безвылазно в плане и симуляторе, высчитывая все варианты своей финансовой
    жизни. Огромное спасибо за проделанную работу! Плюс описание VTBX и разбор странного
    индекса "нетто" в безналоговом фонде - бесконечно благодарен!)
- id: 1495
  author: Андрей
  author_email: olans1992@mail.ru
  author_url: ''
  date: '2021-08-18 11:54:27 +0600'
  date_gmt: '2021-08-18 08:54:27 +0600'
  content: Дмитрий, как у вас получается построить ломанные кривые  на графике (которые
    при симуляции отображаются серым цветом), а не ровно-экспоненциальные? Может у
    вас есть эксель-файл с примером?
- id: 1496
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2021-08-18 12:01:46 +0600'
  date_gmt: '2021-08-18 09:01:46 +0600'
  content: Серые кривые отображают случайно сгенерированные ряды данных с годовыми
    доходностями, то есть это N массивов доходностей за M лет, всего N * M точек на
    графике (показываются только 100 * M - все рисовать слишком дорого и бесполезно).
    Ровно-экспоненциальными они не могут быть, потому что являются случайными значениями
    из логнормального распределения с заданными параметрами.
- id: 1498
  author: Андрей
  author_email: olans1992@mail.ru
  author_url: ''
  date: '2021-08-18 12:20:44 +0600'
  date_gmt: '2021-08-18 09:20:44 +0600'
  content: Спасибо, суть понял) Правда пока не понял, как это реализовать в экселе
    и можно ли это сделать в нём  вообще, ввиду такого количества данных.
- id: 1500
  author: Дмитрий Никитенко
  author_email: dima.nikitenko@gmail.com
  author_url: https://capital-gain.ru
  date: '2021-08-18 12:35:00 +0600'
  date_gmt: '2021-08-18 09:35:00 +0600'
  content: 'В экселе можно генерировать такие ряды. Пример для логнормального распределения:
    <code>LOGNORM.INV(RAND(),LN(1+A1),A2)-1</code>, где A1 - средняя геометрическая
    (это важно) доходность, A2 - стандартное отклонение. На выходе % случайной доходности
    или, если убрать -1, разы изменений. Только у меня ещё есть симуляция небольшого
    возврата к среднему, подогнанная под реальные рыночные данные, это уже сложнее
    сделать (без неё несколько пессимистичнее будут результаты).'
- id: 1502
  author: Андрей
  author_email: olans1992@mail.ru
  author_url: ''
  date: '2021-08-18 13:01:24 +0600'
  date_gmt: '2021-08-18 10:01:24 +0600'
  content: |-
    Распределение доходностей с выбором нужного процентиля - эт я умею строить, а вот множество промежуточных графиков в заданном коридоре неопределённости - нет) Мне понравилось, как они добавляют наглядности графику у вас на сайте.

    Но спасибо за пояснения) Симулятор отличный)
---
<p><!-- wp:paragraph --></p>
<p>Инструмент доступен <a href="https://capital-gain.ru/app/#/monte-carlo" target="_blank" rel="noreferrer noopener">здесь</a>, но сначала немного теории. Когда вы составляете <a href="https://capital-gain.ru/posts/portfolio-planning/">финансовый план</a>, считая сколько вам надо откладывать, чтобы накопить нужную сумму, либо тратить, чтобы не потратить весь капитал раньше времени, обычно берется средняя ожидаемая доходность конкретного портфеля, то есть какая-то цифра из 50-го процентиля возможных исходов.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Это значит, что примерно половина всех исходов по доходности и результирующему капиталу будет меньше того, что представит вам такой план, а половина - больше. В составлении такого финансового плана нет ничего плохого - это полезное упражнение, да и цель его не только в том, чтобы показать какие-то конкретные цифры. Но стоит понимать, что в спектре всех исходов рассчитанный план является лишь одним из вариантов развития событий (пусть и наиболее вероятным).</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Чтобы проанализировать гораздо большее число вариантов, используют <strong>метод Монте-Карло</strong>. Его суть заключается в генерации большого числа случайных исходов на основе входных параметров и последующем анализе их распределения, что позволяет наглядно представить спектр вероятных исходов и сделать более конкретные выводы о реалистичности заложенных инвестором в свой финансовый план параметров.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":2407,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-simulation-results.png"><img src="/assets/images/monte-carlo-simulation-results.png" alt="" class="wp-image-2407"/></a><br />
<figcaption>Исходные данные по изменению капитала за 20 лет, полученные в результате симуляции Монте-Карло. Инструмент анализирует их, чтобы обобщить и представить в полезном виде.</figcaption>
</figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Есть разные подходы для генерации случайных исходов, подходящие для разных областей науки, где применяется такой анализ. После анализа исторических данных на ежегодных интервалах для этого инструмента я выбрал лог-нормальное распределение доходностей, потому что толстые концы кривой распределения на этих интервалах практически нивелируются. Если не уверены, что понимаете о чем речь, можно почитать пару моих статей про <a href="https://capital-gain.ru/posts/investment-risk/">риск</a> и <a href="https://capital-gain.ru/posts/stocks-returns-distribution/">распределение доходностей</a> - будет легче разобраться с инструментом.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>А теперь к практике. Мы разберем три примера использования инструмента.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>Классический пенсионер</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Многим известно знаменитое Trinity study, в рамках которого был проанализирован портфель из американских акций и облигаций (50/50) на 30-летних периодах с целью выяснить безопасную ставку ежегодного снятия средств (safe withdrawal rate, SWR). То есть такую, при которой портфель не исчерпал себя раньше конца 30-летнего периода.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Результатом были 4%, которые сегодня популяризированы в качестве rule of thumb и часто используются будущими пенсионерами для финансового планирования.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Возьмем теперь цель выйти на пенсию с $1000 (я буду использовать 70 000 руб.) и представим, что есть план по её достижению, основанный на правиле 4%, то есть итог накопления по этому плану будет 70000 * 12 / 0.04 = 21 000 000 руб. Его реалистичность мы и будем проверять.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3182,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-30y-retiree-params-1.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-30y-retiree-params-1-1024x351.png" alt="" class="wp-image-3182"/></a><br />
<figcaption>Клик для увеличения</figcaption>
</figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>В качестве минимального целевого капитала вводим 0, потому что цель - не проесть все деньги за 30 лет. Для финансового планирования удобно использовать реальную доходность, то есть за вычетом инфляции, потому что это позволяет вводить все суммы в сегодняшних деньгах и освобождает разум от прогнозов инфляции. Допустим, что реальная средняя геометрическая (CAGR) доходность портфеля этого инвестора 5%. В качестве ожидаемой волатильности (<a href="https://capital-gain.ru/posts/investment-risk/">СКО</a>) портфеля возьмем 12%. Остальные поля пока не трогаем.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>На основе этих данных инструмент сгенерирует 300 000 случайных годовых доходностей (10 000 раз по 30 лет), то есть вместо исторических сотен лет для анализа у нас будет несколько сотен тысячелетий, вместо одного портфеля и 30-летнего периода - 10 000.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Вот результаты из моего запуска (каждый раз они отличаются, но чем больше повторений, тем идентичнее результаты между запусками):</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3183,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-30y-retiree-result-1.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-30y-retiree-result-1-1024x425.png" alt="" class="wp-image-3183"/></a><br />
<figcaption>Самое важное число здесь - первое (процент успешных на конец заданного периода симуляций). График показывает как этот процент меняется по годам среди всех сгенерированных периодов (в данном случае результат максимально стабилен).</figcaption>
</figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Это лишь основная часть результатов - запустите <a href="https://capital-gain.ru/app/#/monte-carlo">симулятор</a> сами, чтобы посмотреть остальные графики.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>В таком сценарии и при условии, что мы допускаем трату всего капитала (в целевую сумму мы ввели 0), всё обещает быть отлично. При реальной средней доходности портфеля в 5% годовых результаты Trinity study вполне подтверждаются.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Но что если мы обязательно хотим сохранить капитал? Тогда вместо нуля в поле целевого капитала можно ввести начальный. В этом случае конечные суммы в каждом из 10 000 полученных портфелей будут сравниваться не с нулем, а с указанным целевым капиталом.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3184,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-30y-retiree-result-1-5.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-30y-retiree-result-1-5-1024x544.png" alt="" class="wp-image-3184"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>И тогда вместо 99% мы получим гораздо менее обнадеживающие 75% - шанс не выполнить цель на сохранение капитала становится значительным. Но не все так плохо. Такой процент успешных симуляций - это то, с чем можно поработать. Как?</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3185,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-30y-retiree-result-2.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-30y-retiree-result-2-1024x1002.png" alt="" class="wp-image-3185"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Во-первых, в худые годы наш инвестор может ужаться и перестать слепо вытягивать из портфеля проиндексированные на инфляцию 840 000 рублей в год. Вместо них будет 720 000 рублей, то есть 60 000 в месяц. На эту сумму наш пенсионер начинает жить, если обычная сумма снятия начинает превышать запланированную долю в 4% от текущего размера портфеля.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Во-вторых, государство будет платить ему шикарную пенсию в 20 000 рублей (тоже индексируется на инфляцию), начиная с 5-го года его 30-летнего периода свободы, а это нелишние 240 000 рублей сегодняшних денег в год для наших расчетов.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Как видно из результатов, ситуация выправляется - 97% портфелей закончили этот путь с балансом больше нуля. В медианном случае 4 года из 30 инвестору придется удовлетвориться уменьшенным снятием средств, чтобы увеличить шансы своего портфеля на существование. В худшем случае на уменьшенной пенсии придется сидеть 29 лет, но вероятность этого довольно низкая. В 90% случаев это будет 15 лет или меньше.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3186,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-30y-retiree-result-min-sums.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-30y-retiree-result-min-sums-1024x338.png" alt="" class="wp-image-3186"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Таков основной принцип работы с инструментом. Теперь коротко пройдемся по остальным сценарием.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>Ранний пенсионер</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Сегодня популярность набирает идея финансовой независимости и раннего выхода на пенсию (FIRE). Инвестиционный горизонт у таких инвесторов расширяется до 50-60 лет, с чем связана основная проблема - 4% в чистом виде становятся заметно опаснее (есть ряд исследований, показывающих это на реальных и сгенерированных доходностях).</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3187,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-50y-retiree-result-1.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-50y-retiree-result-1.png" alt="" class="wp-image-3187"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Я ввел такие же данные, как в самый первый раз, но заменил 30 лет на 60 и указал целевой капитал, равный начальному, потому что смотреть как таят деньги на счете, осознавая, что до конца пенсии ещё лет 30, сможет не каждый. Вместо 99% мы получили 83%, что довольно рисково, хотя и нельзя сказать, что судьбу нашего раннего пенсионера может решать монетка.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Давайте внесем похожие коррективы в этот гениальный план:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3188,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-50y-retiree-result-2.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-50y-retiree-result-2-1024x668.png" alt="" class="wp-image-3188"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Годы тренировок по скоростному накоплению денег позволят нашему пенсионеру ужиматься при необходимости до 60 000 руб. в месяц, а на 35 году году пенсии государство начнет выплачивать ему 15 000 руб. в месяц.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>В результате получаем статистически надежные 97% с почти той же медианой на минимальном потреблении в 10 лет и до 29 лет с минимальной суммой снятия в 90% всех случаев.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>Когда я смогу накопить?</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --></p>
<p>Напоследок рассмотрим как использовать инструмент для анализа не трат, а накоплений. Возьмем того же раннего пенсионера, который планирует накопить 21 000 000, откладывая по 2 000 000 в год и имея начальный капитал в миллион. Параметры будут такие:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3189,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-contributions-params.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-contributions-params-1024x414.png" alt="" class="wp-image-3189"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Вместо отрицательной суммы снятий указываем положительную, означающую пополнение. Период симуляции ставим с запасом, чтобы посмотреть как меняется кривая:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":3190,"sizeSlug":"large","linkDestination":"media"} --></p>
<figure class="wp-block-image size-large"><a href="/assets/images/monte-carlo-contributions-result.png" target="_blank" rel="noopener noreferrer"><img src="/assets/images/monte-carlo-contributions-result-1024x502.png" alt="" class="wp-image-3190"/></a></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Обычный финансовый план, использующий среднюю доходность портфеля для расчетов, предскажет нам срок около 8 лет, что в симуляторе означает процент успешности около 50%.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Ценной здесь является информация о худшем случае, то есть на каком году процент успешности превысит психологически комфортный для вас порог этого плана (например, 80%) или принятые в статистике за надежные 95%.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>В этом примере надежным ориентиром выглядит срок в 10-11 лет, которые понадобятся, чтобы собрать достаточный капитал, если дела на рынке пойдут хуже среднего. Такой подход позволяет уточнить границы сроков накопления и подготовить себя психологически к реализации не самых лучших сценариев. С другой стороны, в случае везения нужную сумму можно собрать за 6-7 лет.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Напишите в комментариях считаете ли новый инструмент полезным и будет ли вам интересно уточнить свои ожидания по срокам накопления и ставкам снятия средств?</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>P.S. Благодарю <a rel="noreferrer noopener" href="https://onfin.github.io/" target="_blank">Андрея Болкисева</a> за помощь с добавлением в модель <a rel="noreferrer noopener" href="https://en.wikipedia.org/wiki/Mean_reversion_(finance)" target="_blank">возврата к среднему</a>, что приблизило распределение генерируемых доходностей к реальному рынку (историческим данным по акциям США и всего мира).</p>
<p><!-- /wp:paragraph --></p>
